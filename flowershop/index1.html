<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta charset="utf-8" />
		<script src="cordova.js"></script>
		<script src="kendo/js/jquery.min.js"></script>
		<script src="kendo/js/kendo.mobile.min.js"></script>
        
        <script src="scripts/datajs-1.0.3.min.js" type="text/javascript"></script>
		<script src="scripts/jaydata.js" type="text/javascript"></script>
		<script src="scripts/jaydatamodules/kendo.js" type="text/javascript"></script>

		<link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
		<link href="styles/main.css" rel="stylesheet" />
	</head>
	<body>
        
		<div data-role="view" data-init="mobileListViewPullToRefresh" data-title="Pull to refresh">
			<ul id="pull-to-refresh-listview"></ul>
		</div>

		<script id="pull-to-refresh-template" type="text/x-kendo-template">
			<img src=${ data.ImageUrl } style="width: 100px; height: 80px;float: left; margin: 0 15px 15px 10px; clear: both;" />
			<div class="info">
			<h3>${ data.Name }</h3>
			</div>
		</script>
        
		<script>

            var application = new kendo.mobile.Application($(document).body, { transition: "slide" });
            
			function mobileListViewPullToRefresh() {
                
				var apiKey = {
					appId: '133e0907-f70b-4f11-92b3-dfebc9bdd6db',
					serviceName: 'mydatabase',
					license: 'business',
					isSSL: false
				};

				//var credentials = {
				//    user: 'admin',
				//    password: 'admin'
				//};

				$data.initService(apiKey /*, credentials*/).then(function (mydatabase, f, t) {
					mydatabase.onReady(function () {
						var listView = $("#pull-to-refresh-listview").kendoMobileListView({
							dataSource: mydatabase.Flowers.asKendoDataSource({ pageSize: 225 }),
							pullToRefresh: false,
							appendOnRefresh: true,
							template: $("#pull-to-refresh-template").text(),
							endlessScroll: true
						});
					});
				});
			}
		</script>
	</body>
</html>
